"undefined"==typeof global?global={}:global,function(){function t(t,e){chrome.storage.local.set({lastDelay:t,nextShow:e})}function e(t){return"en"===t.substr(0,2).toLowerCase()}function o(t,e){chrome.runtime.sendMessage({type:"report_small_count",name:t,value:e})}if(window===window.top){var n=chrome.i18n.getMessage,i=navigator.language||navigator.userLanguage,s=new Promise,a=!1,r="othersites",c=[0,864e6,1728e6,-1],h={NOTIBAR_SHOWED:0,NOTIBAR_ENGAGE_CLICKED:1,NOTIBAR_DISSMISS_CLICKED:2};chrome.runtime.sendMessage({type:"get_language"},function(t){t&&t.lang&&s.resolve(t.lang.substr(0,2).toLowerCase())});var l=function(){this._container=null,this._shadowRoot=null,this.isShown=!1,this._lastDelay=c[0],this._init()};l.prototype={constructor:l,_init:function(){this._getDelayInfo(),this.container=document.createElement("div"),this.container.setAttribute("class","coccoc-en2vi-container"),this.shadowRoot=this.container.createShadowRoot()||this.container.webkitCreateShadowRoot(),this.shadowRoot.innerHTML=this._renderHTML(),this.shadowRoot.querySelector(".btn-show").onclick=this._handleEngage.bind(this),this.shadowRoot.querySelector(".btn-hide").onclick=this._handleDismiss.bind(this);var t=document.createElement("style"),e="";e+='@import "'+chrome.runtime.getURL("css/banner.css")+'";\n',t.innerHTML=e,this.shadowRoot.appendChild(t)},_renderHTML:function(){return Mustache.render('        <div class="banner hide">          <img id="logo" src="{{logo_src}}"/>          <div class="content">            <span>{{i18n_banner_text}}</span>            <div class="btn-group">              <a href="#" class="btn btn-show">{{i18n_show_me_how}}</a>              <a href="#" class="btn btn-hide">{{i18n_i_know_it}}</a>            </div>          </div>        </div>',{logo_src:chrome.runtime.getURL("images/banner-logo.png"),i18n_banner_text:n("banner_text"),i18n_show_me_how:n("show_me_how"),i18n_i_know_it:n("i_know_it"),css_import_url:chrome.runtime.getURL("css/banner.css").toString()})},_getDelayInfo:function(){var t=this;chrome.storage.local.get(["lastDelay","nextShow"],function(e){if(e&&e.lastDelay&&e.nextShow){t._lastDelay=e.lastDelay;var o=e.nextShow;if(t._lastDelay>2)return void(a=!0);Date.now()<o&&(a=!0)}})},_handleEngage:function(n){n.preventDefault(),n.stopPropagation(),t(3,Date.now()-1);var s=e(i)?"http://coccoc.com/en/dictionary#utm_source=":"http://coccoc.com/dictionary#utm_source=";s+=r+"&utm_medium=infobar&utm_campaign=dictionary_education",window.open(s,"_blank"),this._hide(),o("Notibar",h.NOTIBAR_ENGAGE_CLICKED)},_handleDismiss:function(e){e.preventDefault(),e.stopPropagation(),t(this._lastDelay+1,Date.now()+c[this._lastDelay+1]),this._hide(),o("Notibar",h.NOTIBAR_DISSMISS_CLICKED)},_hide:function(){this.shadowRoot.childNodes[1].classList.remove("fly-in"),this.shadowRoot.childNodes[1].classList.add("fly-out"),this.isShown=!1},show:function(){this.shadowRoot.childNodes[1].classList.remove("hide"),this.shadowRoot.childNodes[1].classList.add("fly-in"),this.isShown=!0}},new l;chrome.runtime.sendMessage({type:"is_panel"},function(t){t.isPanel,1})}}();